/*! For license information please see main.b06ed9dd.chunk.js.LICENSE.txt */
(this["webpackJsonpreact-mixdesk-example"]=this["webpackJsonpreact-mixdesk-example"]||[]).push([[0],{12:function(t,e,n){t.exports=n(20)},13:function(t,e,n){},19:function(t,e,n){},20:function(t,e,n){"use strict";n.r(e);n(13);var r=n(0),a=n.n(r),u=n(9),i=n.n(u),c=n(10),s=n(2),o=n(7),l=n(6),f=n(1),p=n.n(f),d=n(3),h=n(4),m=n(5),v=n(11);var y=function(t,e){return t(e={exports:{}},e.exports),e.exports}((function(t){!function(){var e={}.hasOwnProperty;function n(){for(var t=[],r=0;r<arguments.length;r++){var a=arguments[r];if(a){var u=typeof a;if("string"===u||"number"===u)t.push(a);else if(Array.isArray(a)&&a.length){var i=n.apply(null,a);i&&t.push(i)}else if("object"===u)for(var c in a)e.call(a,c)&&a[c]&&t.push(c)}}return t.join(" ")}t.exports?(n.default=n,t.exports=n):window.classNames=n}()}));function _(t){return null!=t&&"object"===typeof t&&!0===t["@@functional/placeholder"]}function b(t){return function e(n){return 0===arguments.length||_(n)?e:t.apply(this,arguments)}}function g(t){return function e(n,r){switch(arguments.length){case 0:return e;case 1:return _(n)?e:b((function(e){return t(n,e)}));default:return _(n)&&_(r)?e:_(n)?b((function(e){return t(e,r)})):_(r)?b((function(e){return t(n,e)})):t(n,r)}}}var k=g((function(t,e){return Number(t)+Number(e)}));function E(t,e){switch(t){case 0:return function(){return e.apply(this,arguments)};case 1:return function(t){return e.apply(this,arguments)};case 2:return function(t,n){return e.apply(this,arguments)};case 3:return function(t,n,r){return e.apply(this,arguments)};case 4:return function(t,n,r,a){return e.apply(this,arguments)};case 5:return function(t,n,r,a,u){return e.apply(this,arguments)};case 6:return function(t,n,r,a,u,i){return e.apply(this,arguments)};case 7:return function(t,n,r,a,u,i,c){return e.apply(this,arguments)};case 8:return function(t,n,r,a,u,i,c,s){return e.apply(this,arguments)};case 9:return function(t,n,r,a,u,i,c,s,o){return e.apply(this,arguments)};case 10:return function(t,n,r,a,u,i,c,s,o,l){return e.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}var O=g((function(t,e){return 1===t?b(e):E(t,function t(e,n,r){return function(){for(var a=[],u=0,i=e,c=0;c<n.length||u<arguments.length;){var s;c<n.length&&(!_(n[c])||u>=arguments.length)?s=n[c]:(s=arguments[u],u+=1),a[c]=s,_(s)||(i-=1),c+=1}return i<=0?r.apply(this,a):E(i,t(e,a,r))}}(t,[],e))}));function x(t){return function e(n,r,a){switch(arguments.length){case 0:return e;case 1:return _(n)?e:g((function(e,r){return t(n,e,r)}));case 2:return _(n)&&_(r)?e:_(n)?g((function(e,n){return t(e,r,n)})):_(r)?g((function(e,r){return t(n,e,r)})):b((function(e){return t(n,r,e)}));default:return _(n)&&_(r)&&_(a)?e:_(n)&&_(r)?g((function(e,n){return t(e,n,a)})):_(n)&&_(a)?g((function(e,n){return t(e,r,n)})):_(r)&&_(a)?g((function(e,r){return t(n,e,r)})):_(n)?b((function(e){return t(e,r,a)})):_(r)?b((function(e){return t(n,e,a)})):_(a)?b((function(e){return t(n,r,e)})):t(n,r,a)}}}var j=Array.isArray||function(t){return null!=t&&t.length>=0&&"[object Array]"===Object.prototype.toString.call(t)};function w(t){return null!=t&&"function"===typeof t["@@transducer/step"]}function A(t,e,n){return function(){if(0===arguments.length)return n();var r=Array.prototype.slice.call(arguments,0),a=r.pop();if(!j(a)){for(var u=0;u<t.length;){if("function"===typeof a[t[u]])return a[t[u]].apply(a,r);u+=1}if(w(a)){var i=e.apply(null,r);return i(a)}}return n.apply(this,arguments)}}var N=function(){return this.xf["@@transducer/init"]()},C=function(t){return this.xf["@@transducer/result"](t)},S=g((function(t,e){return e>t?e:t}));function T(t,e){for(var n=0,r=e.length,a=Array(r);n<r;)a[n]=t(e[n]),n+=1;return a}function P(t){return"[object String]"===Object.prototype.toString.call(t)}var R=b((function(t){return!!j(t)||!!t&&("object"===typeof t&&(!P(t)&&(1===t.nodeType?!!t.length:0===t.length||t.length>0&&(t.hasOwnProperty(0)&&t.hasOwnProperty(t.length-1)))))})),L=function(){function t(t){this.f=t}return t.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},t.prototype["@@transducer/result"]=function(t){return t},t.prototype["@@transducer/step"]=function(t,e){return this.f(t,e)},t}();var I=g((function(t,e){return E(t.length,(function(){return t.apply(e,arguments)}))}));function B(t,e,n){for(var r=n.next();!r.done;){if((e=t["@@transducer/step"](e,r.value))&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}r=n.next()}return t["@@transducer/result"](e)}function D(t,e,n,r){return t["@@transducer/result"](n[r](I(t["@@transducer/step"],t),e))}var F="undefined"!==typeof Symbol?Symbol.iterator:"@@iterator";function V(t,e,n){if("function"===typeof t&&(t=function(t){return new L(t)}(t)),R(n))return function(t,e,n){for(var r=0,a=n.length;r<a;){if((e=t["@@transducer/step"](e,n[r]))&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}r+=1}return t["@@transducer/result"](e)}(t,e,n);if("function"===typeof n["fantasy-land/reduce"])return D(t,e,n,"fantasy-land/reduce");if(null!=n[F])return B(t,e,n[F]());if("function"===typeof n.next)return B(t,e,n);if("function"===typeof n.reduce)return D(t,e,n,"reduce");throw new TypeError("reduce: list must be array or iterable")}var Y=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype["@@transducer/init"]=N,t.prototype["@@transducer/result"]=C,t.prototype["@@transducer/step"]=function(t,e){return this.xf["@@transducer/step"](t,this.f(e))},t}(),K=g((function(t,e){return new Y(t,e)}));function q(t,e){return Object.prototype.hasOwnProperty.call(e,t)}var M=Object.prototype.toString,G=function(){return"[object Arguments]"===M.call(arguments)?function(t){return"[object Arguments]"===M.call(t)}:function(t){return q("callee",t)}}(),X=!{toString:null}.propertyIsEnumerable("toString"),U=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],W=function(){return arguments.propertyIsEnumerable("length")}(),H=function(t,e){for(var n=0;n<t.length;){if(t[n]===e)return!0;n+=1}return!1},J="function"!==typeof Object.keys||W?b((function(t){if(Object(t)!==t)return[];var e,n,r=[],a=W&&G(t);for(e in t)!q(e,t)||a&&"length"===e||(r[r.length]=e);if(X)for(n=U.length-1;n>=0;)q(e=U[n],t)&&!H(r,e)&&(r[r.length]=e),n-=1;return r})):b((function(t){return Object(t)!==t?[]:Object.keys(t)})),Z=g(A(["fantasy-land/map","map"],K,(function(t,e){switch(Object.prototype.toString.call(e)){case"[object Function]":return O(e.length,(function(){return t.call(this,e.apply(this,arguments))}));case"[object Object]":return V((function(n,r){return n[r]=t(e[r]),n}),{},J(e));default:return T(t,e)}}))),z=g((function(t,e){for(var n=e,r=0;r<t.length;){if(null==n)return;n=n[t[r]],r+=1}return n})),Q=g((function(t,e){return z([t],e)})),$=g((function(t,e){return Z(Q(t),e)})),tt=x(V),et=b((function(t){return O(t.length,t)})),nt=b((function(t){return!t})),rt=g((function(t,e){var n=t<0?e.length+t:t;return P(e)?e.charAt(n):e[n]})),at=rt(0);var ut=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype["@@transducer/init"]=N,t.prototype["@@transducer/result"]=C,t.prototype["@@transducer/step"]=function(t,e){return this.f(e)?this.xf["@@transducer/step"](t,e):t},t}(),it=g(A(["filter"],g((function(t,e){return new ut(t,e)})),(function(t,e){return n=e,"[object Object]"===Object.prototype.toString.call(n)?V((function(n,r){return t(e[r])&&(n[r]=e[r]),n}),{},J(e)):function(t,e){for(var n=0,r=e.length,a=[];n<r;)t(e[n])&&(a[a.length]=e[n]),n+=1;return a}(t,e);var n}))),ct=g((function(t,e){return it((n=t,function(){return!n.apply(this,arguments)}),e);var n})),st=g((function(t,e){return O(tt(S,0,$("length",e)),(function(){var n=arguments,r=this;return t.apply(r,T((function(t){return t.apply(r,n)}),e))}))})),ot=g((function(t,e){return t/e})),lt=rt(-1);var ft=b((function(t){return null!=t&&(e=t.length,"[object Number]"===Object.prototype.toString.call(e))?t.length:NaN;var e})),pt=st(ot,[tt(k,0),ft]),dt="_style-module__meter__1tkPC",ht="_style-module__meterValue__1LOLp",mt=function(t){var e=t.analyser,n=void 0===e?null:e,u=t.width,i=void 0===u?210:u,c=t.height,s=void 0===c?20:c;if(!n)return null;var o=Object(r.useRef)(null);return Object(r.useEffect)((function(){var t=o.current&&o.current.getContext("2d"),e=new Uint8Array(n.frequencyBinCount);!function r(){n.getByteFrequencyData(e);var a=pt(e);t&&(t.clearRect(0,0,i,s),t.fillStyle=function(t,e){var n=e.width,r=e.height,a=t.createLinearGradient(0,0,n,r);return a.addColorStop(0,"#05860f"),a.addColorStop(.8,"#f9ef5c"),a.addColorStop(.9,"#861615"),a}(t,{width:i,height:s}),t.fillRect(0,0,i/100*a,s)),requestAnimationFrame(r)}()}),[]),a.a.createElement("div",{className:dt},a.a.createElement("canvas",{className:ht,width:i,height:s,ref:o}))},vt={icon:"_style-module__icon__1hlIZ",icon_type_play:"_style-module__icon_type_play__2tZmb",icon_type_pause:"_style-module__icon_type_pause__21fmi",icon_type_rewind:"_style-module__icon_type_rewind__oJ0Xw"},yt=function(t){var e=t.type;return a.a.createElement("div",{className:y(vt.icon,vt["icon_type_".concat(e)])})},_t="PLAYING",bt="PAUSED",gt="READY",kt="NOT_SET",Et="running",Ot="READY",xt="FAILED",jt="NOT_SET",wt={LOWPASS:"lowpass",HIGHPASS:"highpass",BANDPASS:"bandpass"},At=function(t){return t.status===_t},Nt=function(t){return t.status===bt},Ct=function(t){return At(t)||Nt(t)||function(t){return t.status===gt}(t)},St=Z((function(t){return t.play()})),Tt=Z((function(t){return t.pause()})),Pt=Z((function(t){t.stop(),t.play()})),Rt={desk:"_style-module__desk__2kf8g",controlsContainer:"_style-module__controlsContainer__3WLpI",tracks:"_style-module__tracks__2TO1x",controls:"_style-module__controls__1otLf",button:"_style-module__button__2FsJu",isButtonPressed:"_style-module__isButtonPressed__3oNW9",effects:"_style-module__effects__35pDI"},Lt=function(t){var e=t.playback,n=void 0===e?{}:e,r=t.onPlay,u=void 0===r?function(){}:r,i=t.onPause,c=void 0===i?function(){}:i,s=t.onRewind,o=void 0===s?function(){}:s,l=t.tracks,f=void 0===l?[]:l,p=t.effects,d=void 0===p?[]:p,h=function(t){return y(Rt.control,Rt.button,t&&Rt.isButtonPressed)},m=nt(Ct(n));return a.a.createElement("div",{className:Rt.desk},a.a.createElement("div",{className:Rt.tracks},f),a.a.createElement("div",{className:Rt.controlsContainer},a.a.createElement("div",{className:Rt.controls},n.analyser&&a.a.createElement(mt,{analyser:n.analyser}),a.a.createElement("button",{className:h(At(n)),onClick:u,disabled:m},a.a.createElement(yt,{type:"play"}),"Play"),a.a.createElement("button",{className:h(Nt(n)),onClick:c,disabled:m},a.a.createElement(yt,{type:"pause"}),"Pause"),a.a.createElement("button",{className:h(!1),onClick:o,disabled:m},a.a.createElement(yt,{type:"rewind"}),"Rewind")),a.a.createElement("div",{className:Rt.effects},d)))},It="_style-module__fader__3SLwD",Bt="_style-module__control__1PidS",Dt="_style-module__thumb__jFkfm",Ft="_style-module__isHorisontal__a_YRY",Vt=function(t){var e=t.position,n=void 0===e?0:e,r=t.isVertical,u=void 0!==r&&r,i=t.events,c=void 0===i?{}:i,s=u?"bottom":"left",o=n+"%";return a.a.createElement("div",Object.assign({className:Dt,style:{[s]:o}},c))},Yt={mousemove:"touchmove",mouseup:"touchend",mousedown:"touchstart"},Kt=function(){return"ontouchstart"in window},qt=function(t){return Kt()?Yt[t]:t},Mt=function(t){var e=t.value,n=void 0===e?0:e,u=t.isVertical,i=void 0!==u&&u,c=t.onChange,s=void 0===c?function(){}:c,o=Object(r.useRef)(null),l=function(t){t.preventDefault();var e=o.current,n=e&&e.getBoundingClientRect(),r=function(t){return t.touches?t.touches[0].pageX:t.pageX}(t)-document.documentElement.scrollLeft,a=function(t){return t.touches?t.touches[0].pageY:t.pageY}(t)-document.documentElement.scrollTop,u=i?function(t,e){var n=e.top,r=e.bottom,a=t;return a<n&&(a=n),a>r&&(a=r),(a=r-a)/(e.height/100)}(a,n):function(t,e){var n=e.width,r=e.left,a=t,u=r+n;return a>u&&(a=u),a<r&&(a=r),(a-=r)/(n/100)}(r,n);return s(u),!1},f=function t(e){return e.preventDefault(),document.documentElement.removeEventListener(qt("mousemove"),l),document.documentElement.removeEventListener(qt("mouseup"),t),!1},p=Kt()?"onTouchStart":"onMouseDown";return a.a.createElement("div",{className:y(It,!i&&Ft),ref:o},a.a.createElement("div",{className:Bt},a.a.createElement(Vt,{position:n,events:{[p]:function(t){return t.preventDefault(),document.documentElement.addEventListener(qt("mousemove"),l),document.documentElement.addEventListener(qt("mouseup"),f),!1}},isVertical:i})))},Gt="_style-module__radio__3DvEK",Xt="_style-module__label__2mZqh",Ut="_style-module__control__1W6Nw",Wt="_style-module__title__2UB_d",Ht="_style-module__isSelected__3k2x_",Jt="_style-module__parameter__ykfH9",Zt="_style-module__controlContainer__3YzIf",zt="_style-module__title__36aDZ",Qt={fader:Mt,radio:function(t){t.name;var e=t.value,n=t.values,r=void 0===n?[]:n,u=t.onChange,i=void 0===u?function(){}:u;return a.a.createElement("div",{className:Gt},r&&r.map((function(t){return a.a.createElement("div",{key:t,className:Xt,onClick:function(){return i(t)}},a.a.createElement("div",{className:y(Ut,t===e&&Ht)}),a.a.createElement("div",{className:Wt},t))})))}},$t=function(t){var e=t.onChange,n=Object(v.a)(t,["onChange"]),r=n.id,u=n.name,i=n.type,c=function(t){return Qt[t]}(void 0===i?"fader":i);return c?a.a.createElement("div",{className:Jt,key:r},a.a.createElement("span",{className:zt},u,":"),a.a.createElement("div",{className:Zt},a.a.createElement(c,Object.assign({},n,{onChange:e(r)})))):null},te={effect:"_style-module__effect__2qSP4",title:"_style-module__title__Ls5Oz"},ee=function(t){var e=t.name,n=void 0===e?"Untitled":e,r=t.parameters,u=t.onParamChange,i=void 0===u?function(){}:u;return a.a.createElement("div",{className:te.effect},a.a.createElement("div",{className:te.title},n),r&&r.map((function(t){return a.a.createElement("div",{className:te.parameterValue,key:t.id},a.a.createElement($t,Object.assign({},t,{onChange:i})))})))},ne="_style-module__track__2iklQ",re="_style-module__button__3U0Kd",ae="_style-module__isPressed__3mOYy",ue="_style-module__sends___RuPX",ie="_style-module__send__2WB_F",ce="_style-module__sendTitle__3M106",se="_style-module__title__1mGJd",oe=function(t){var e=t.id,n=t.title,r=void 0===n?"Untitled":n,u=t.volume,i=void 0===u?0:u,c=t.isMuted,s=void 0!==c&&c,o=t.isEffectsDisabled,l=void 0!==o&&o,f=t.send,p=void 0===f?{}:f,d=t.onMute,h=void 0===d?function(){}:d,m=t.onBypass,v=void 0===m?function(){}:m,_=t.onVolumeChange,b=void 0===_?function(){}:_,g=t.onSendLevelChange,k=void 0===g?function(){}:g;return a.a.createElement("div",{className:ne},a.a.createElement(Mt,{onChange:b,value:i,isVertical:!0}),a.a.createElement("div",{className:"buttons"},a.a.createElement("button",{className:y(re,s&&ae),onClick:function(){return h(e)}},"Mute"),a.a.createElement("button",{className:y(re,l&&ae),onClick:function(){return v(e)}},"Bypass FX")),a.a.createElement("div",{className:ue},p&&J(p).map((function(t){return a.a.createElement("div",{className:ie,key:t},a.a.createElement("span",{className:ce},t),a.a.createElement(Mt,{onChange:k(t),value:p[t]}))}))),a.a.createElement("div",{className:se},r))},le=Object(r.createContext)(null),fe=function(t){var e=t.value,n=t.maxValue;return 1===t.defaultValue?e/.01:e/(n/100)},pe=function(t,e){var n=t.maxValue,r=t.minValue,a=e*((1===t.defaultValue?1:n)/100);return a<r?(t.value=r,t):a>n?(t.value=n,t):(t.value=a,t)},de=function(t,e){return J(e).forEach((function(n){return xe(t,n)?pe(t[n],e[n]):t[n]=e[n],t}))},he=function(t,e){return t.connect(e)},me=function(t,e){t.disconnect(),he(t,e)},ve=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=t.createGain();return n.gain.value=e,n},ye=function(t){var e=t.id,n=t.title,r=t.volume,a=t.muted,u=t.bypassFX,i=t.fx;return{id:e,title:n,volume:r,state:t.state,isMuted:a,isEffectsDisabled:u,send:Z((function(t){return fe(t.gain)}),i)}},_e=function(t){switch(t.id){case"delay":return{id:(e=t).id,name:"Delay",parameters:[{name:"Time",id:"time",value:e.time},{name:"Feedback",id:"feedback",value:e.feedback},{name:"Frequency",id:"frequency",value:e.frequency}]};case"distortion":return function(t){var e=t.id,n=t.filterType,r=t.frequency,a=t.strength;return{id:e,name:"Distortion",parameters:[{name:"Filter Type",id:"filterType",value:n,values:Object.values(wt),type:"radio"},{name:"Frequency",id:"frequency",value:r},{name:"Strength",id:"strength",value:a}]}}(t);case"reverb":return function(t){var e=t.id,n=t.responses;return{id:e,name:"Reverb",parameters:[{name:"Response",id:"currentResponse",value:t.currentResponse,values:Object.keys(n),type:"radio"}]}}(t);default:return null}var e},be=function(){function t(e){var n=e.url,r=e.title,a=e.context,u=e.masterBus,i=e.sends,c=void 0===i?[]:i;Object(h.a)(this,t),this.id=function(t){return t.replace(/[^A-Za-z0-9]+/gi,"").toLowerCase()}(r),this.source=null,this.buffer=null,this.title=r,this.context=a,this.pausedAt=0,this.startedAt=0,this.muted=!1,this.playing=!1,this.bypassFX=!1,this.state=jt,this.bus=ve(a),he(this.bus,u),this.fx={},c.length>0&&this.addFx(c),this.loadingState=this.load(n)}return Object(m.a)(t,[{key:"load",value:function(t){var e=this;return je(t).then((function(t){return new Promise((function(n,r){return e.context.decodeAudioData(t,n,r)}))})).then((function(t){return e.buffer=t,e.state=Ot,e})).catch((function(t){return e.state=xt,console.log("[ERROR LOADING TRACK]",t),e}))}},{key:"play",value:function(){if(this.playing)return!1;this.source=this.context.createBufferSource(),this.source.buffer=this.buffer,this.source.connect(this.bus),this.source.start(0,this.pausedAt),this.startedAt=this.context.currentTime-this.pausedAt,this.pausedAt=0,this.playing=!0}},{key:"pause",value:function(){if(this.playing){var t=this.context.currentTime-this.startedAt;this.stop(),this.pausedAt=t}}},{key:"stop",value:function(){this.source&&(this.source.disconnect(),this.source.stop(0),this.source=null),this.pausedAt=0,this.startedAt=0,this.playing=!1}},{key:"mute",value:function(){this.previousVolume=this.volume,this.volume=0,this.muted=!0}},{key:"unmute",value:function(){this.muted=!1,this.volume=this.previousVolume}},{key:"toggleMute",value:function(){this.muted?this.unmute():this.mute()}},{key:"addFx",value:function(t){var e=this;return t.map((function(t){var n=t.id,r=t.signalIn,a=ve(e.context,0);return!e.fx[n]&&(he(e.bus,a),he(a,r),e.fx[n]=a,a)}))}},{key:"removeFx",value:function(t){this.fx[t].disconnect()}},{key:"toggleFX",value:function(){var t=this,e=Object.keys(this.fx);return this.bypassFX?e.map((function(e){return t.fx[e].gain.value=t.fx[e].previousVolume})):e.map((function(e){t.fx[e].previousVolume=t.fx[e].gain.value,t.fx[e].gain.value=0})),this.bypassFX=!this.bypassFX,this.bypassFX}},{key:"volume",get:function(){return fe(this.bus.gain)},set:function(t){this.muted?this.previousVolume=t:pe(this.bus.gain,t)}}]),t}(),ge=function(){return new(window.AudioContext||window.webkitAudioContext)},ke=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=t.createGain();return n.connect(t.destination),e.map((function(t){return n.connect(t)})),n},Ee=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{fftSize:2048},n=t.createAnalyser();return J(e).map((function(t){return n[t]=e[t]})),n},Oe=et((function(t,e){var n=t.context,r=t.masterBus,a=t.sends,u=void 0===a?[]:a,i=e.url,c=e.title;return new be({url:i,title:c,context:n,masterBus:r,sends:u})})),xe=function(t,e){return t[e]instanceof AudioParam},je=function(t){return fetch(t).then((function(t){return t.arrayBuffer()}))},we=function(t){return t.state===Et},Ae=function(t){return t.resume()},Ne=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];Object(h.a)(this,t),this.context=ge(),this.analyser=Ee(this.context),this.masterBus=ke(this.context,[this.analyser]),this.fx=r.map((function(t){return new t(e.context,e.masterBus)})),this.tracks=n.map(Oe({context:this.context,masterBus:this.masterBus,sends:this.fx}))}return Object(m.a)(t,[{key:"play",value:function(){var t=Object(d.a)(p.a.mark((function t(){var e;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.context,!1!==we(e)){t.next=4;break}return t.next=4,Ae(e);case 4:return St(this.tracks),t.abrupt("return",this);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"pause",value:function(){var t=Object(d.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Tt(this.tracks),t.abrupt("return",this);case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"rewind",value:function(){var t=Object(d.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Pt(this.tracks),t.abrupt("return",this);case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"setTrackVolume",value:function(){var t=Object(d.a)(p.a.mark((function t(e,n){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.tracks.map((function(t){return t.id===e&&(t.volume=n),t})));case 1:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"setTrackSendLevel",value:function(){var t=Object(d.a)(p.a.mark((function t(e,n,r){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.tracks.map((function(t){return t.id===e&&pe(t.fx[n].gain,r),t})));case 1:case"end":return t.stop()}}),t,this)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"toggleTrack",value:function(){var t=Object(d.a)(p.a.mark((function t(e){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.tracks.map((function(t){return t.id===e&&t.toggleMute(),t})));case 1:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"toggleTrackFx",value:function(){var t=Object(d.a)(p.a.mark((function t(e){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.tracks.map((function(t){return t.id===e&&t.toggleFX(),t})));case 1:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"setSendParamValue",value:function(){var t=Object(d.a)(p.a.mark((function t(e,n,r){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.fx.map((function(t){return t.id===e&&de(t,{[n]:r}),t})));case 1:case"end":return t.stop()}}),t,this)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),t}(),Ce=function(){function t(e){var n=e.id,r=e.context,a=e.masterBus;Object(h.a)(this,t),this.id=n,this.isLooped=!1,this.chain=[],this.context=r,this.signalIn=ve(r),this.signalOut=ve(r),he(this.signalOut,a)}return Object(m.a)(t,[{key:"addNode",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};de(t,e),this.isChainEmpty?he(this.signalIn,t):me(lt(this.chain),t),he(t,this.signalOut),this.chain.push(t)}},{key:"tweakNode",value:function(t,e,n){var r=this.chain[t];return!!r&&de(r,{[e]:n})}},{key:"isChainEmpty",get:function(){return 0===this.chain.length}},{key:"gain",get:function(){return this.signalIn.gain.value},set:function(t){this.signalIn.gain.value=t}},{key:"loop",set:function(t){var e=lt(this.chain),n=at(this.chain);he(e,n),this.isLooped=t},get:function(){return this.isLooped}}]),t}(),Se={Versatile:"assets/audio/impulse-response/impulse-1.mp3",Pattan:"assets/audio/impulse-response/impulse-2.mp3",Style:"assets/audio/impulse-response/impulse-3.mp3"},Te=new Ne([{title:"Drums",url:"https://panamaprophet.com/mixdesk/assets/audio/drums.mp3"},{title:"Bass",url:"https://panamaprophet.com/mixdesk/assets/audio/bass.mp3"},{title:"Keys",url:"https://panamaprophet.com/mixdesk/assets/audio/riddim.mp3"},{title:"Melodies",url:"https://panamaprophet.com/mixdesk/assets/audio/vox.mp3"}],[function(t){Object(o.a)(n,t);var e=Object(l.a)(n);function n(t,r){var a;return Object(h.a)(this,n),(a=e.call(this,{context:t,masterBus:r,id:"delay"})).addNode(t.createDelay(),{delayTime:25}),a.addNode(t.createGain(),{gain:80}),a.addNode(t.createBiquadFilter(),{frequency:5}),a.loop=!0,a}return Object(m.a)(n,[{key:"time",set:function(t){this.tweakNode(0,"delayTime",t)},get:function(){return fe(this.chain[0].delayTime)}},{key:"feedback",set:function(t){this.tweakNode(1,"gain",t)},get:function(){return fe(this.chain[1].gain)}},{key:"frequency",set:function(t){this.tweakNode(2,"frequency",t)},get:function(){return fe(this.chain[2].frequency)}}]),n}(Ce),function(t){Object(o.a)(n,t);var e=Object(l.a)(n);function n(t,r){var a,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{responses:Se};return Object(h.a)(this,n),(a=e.call(this,{context:t,masterBus:r,id:"reverb"})).responses=u.responses,a.currentResponseId=at(J(u.responses)),a.addNode(t.createConvolver()),a.loadResponse(),a}return Object(m.a)(n,[{key:"loadResponse",value:function(){var t=Object(d.a)(p.a.mark((function t(){var e,n,r,a=this;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.responses[this.currentResponseId],t.next=3,je(e).catch((function(t){return console.log("[ERROR LOADING RESPONSE]",t)}));case 3:if(!((n=t.sent).byteLength>0)){t.next=13;break}return r=new Promise((function(t,e){return a.context.decodeAudioData(n,t,e)})),t.t0=this,t.next=9,r;case 9:t.t1=t.sent,t.t0.tweakNode.call(t.t0,0,"buffer",t.t1),t.next=14;break;case 13:console.log("[ERROR LOADING RESPONSE] arrayBuffer is empty");case 14:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"currentResponse",get:function(){return this.currentResponseId},set:function(t){this.responses[t]&&(this.currentResponseId=t,this.loadResponse())}}]),n}(Ce),function(t){Object(o.a)(n,t);var e=Object(l.a)(n);function n(t,r){var a;return Object(h.a)(this,n),(a=e.call(this,{context:t,masterBus:r,id:"distortion"}))._strength=200,a.addNode(t.createBiquadFilter(),{type:"highpass",frequency:138,Q:1}),a.addNode(t.createWaveShaper(),{curve:a.getCurve(a._strength),oversample:"4x"}),a}return Object(m.a)(n,[{key:"getCurve",value:function(t){for(var e,n="number"===typeof t?t:50,r=new Float32Array(44100),a=Math.PI/180,u=0;u<44100;++u)e=2*u/44100-1,r[u]=(3+n)*e*20*a/(Math.PI+n*Math.abs(e));return r}},{key:"filterType",set:function(t){this.tweakNode(0,"type",t)},get:function(){return this.chain[0].type}},{key:"frequency",set:function(t){this.tweakNode(0,"frequency",t)},get:function(){return fe(this.chain[0].frequency)}},{key:"strength",set:function(t){this._strength=t,this.tweakNode(1,"curve",this.getCurve(t))},get:function(){return fe({maxValue:1e3,minValue:0,value:this._strength})}}]),n}(Ce)]),Pe=function(){var t=Object(d.a)(p.a.mark((function t(e){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Te.play();case 2:return t.abrupt("return",e({type:"PLAYBACK_PLAY"}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Re=function(){var t=Object(d.a)(p.a.mark((function t(e){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Te.pause();case 2:return t.abrupt("return",e({type:"PLAYBACK_PAUSE"}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Le=function(){var t=Object(d.a)(p.a.mark((function t(e){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Te.rewind();case 2:return t.abrupt("return",e({type:"PLAYBACK_REWIND"}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Ie=et(function(){var t=Object(d.a)(p.a.mark((function t(e,n,r,a){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Te.setSendParamValue(n,r,a);case 2:return t.abrupt("return",e({type:"SET_EFFECT_PARAM_VALUE",payload:{effectId:n,parameterId:r,value:a}}));case 3:case"end":return t.stop()}}),t)})));return function(e,n,r,a){return t.apply(this,arguments)}}()),Be=et(function(){var t=Object(d.a)(p.a.mark((function t(e,n,r){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Te.setTrackVolume(n,r);case 2:return t.abrupt("return",e({type:"SET_TRACK_VOLUME",payload:{trackId:n,value:r}}));case 3:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()),De=et(function(){var t=Object(d.a)(p.a.mark((function t(e,n,r,a){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Te.setTrackSendLevel(n,r,a);case 2:return t.abrupt("return",e({type:"SET_TRACK_SEND_LEVEL",payload:{fxId:r,trackId:n,value:a}}));case 3:case"end":return t.stop()}}),t)})));return function(e,n,r,a){return t.apply(this,arguments)}}()),Fe=et(function(){var t=Object(d.a)(p.a.mark((function t(e,n){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Te.toggleTrack(n);case 2:return t.abrupt("return",e({type:"TRACK_MUTE_TOGGLE",payload:{trackId:n}}));case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),Ve=et(function(){var t=Object(d.a)(p.a.mark((function t(e,n){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Te.toggleTrackFx(n);case 2:return t.abrupt("return",e({type:"TRACK_FX_TOGGLE",payload:{trackId:n}}));case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),Ye=function(t){var e=Object(r.useContext)(le);return a.a.createElement(ee,Object.assign({},t,{onParamChange:Ie(e,t.id)}))},Ke=function(t){var e=t.id,n=Object(r.useContext)(le);return a.a.createElement(oe,Object.assign({},t,{onMute:Fe(n),onBypass:Ve(n),onVolumeChange:Be(n,e),onSendLevelChange:De(n,e)}))},qe=function(t){var e=t.tracks,n=t.effects,u=t.playback,i=Object(r.useContext)(le),c=e.map((function(t){return a.a.createElement(Ke,Object.assign({},t,{key:t.id}))})),s=n.map((function(t){return a.a.createElement(Ye,Object.assign({},t,{key:t.id}))}));return a.a.createElement(Lt,{onPlay:function(){return Pe(i)},onPause:function(){return Re(i)},onRewind:function(){return Le(i)},tracks:c,effects:s,playback:u})},Me=function(t,e){var n=e.type,r=e.payload;switch(n){case"SET_TRACK_VOLUME":return function(t,e,n){return n.map((function(n){return n.id===e?Object(s.a)(Object(s.a)({},n),{},{volume:t}):n}))}(r.value,r.trackId,t);case"SET_TRACK_SEND_LEVEL":return function(t,e,n,r){return r.map((function(r){return r.id===n?Object(s.a)(Object(s.a)({},r),{},{send:Object(s.a)(Object(s.a)({},r.send),{},{[e]:t})}):r}))}(r.value,r.fxId,r.trackId,t);case"TRACK_MUTE_TOGGLE":return function(t,e){return e.map((function(e){return e.id===t?Object(s.a)(Object(s.a)({},e),{},{isMuted:!e.isMuted}):e}))}(r.trackId,t);case"TRACK_FX_TOGGLE":return function(t,e){return e.map((function(e){return e.id===t?Object(s.a)(Object(s.a)({},e),{},{isEffectsDisabled:!e.isEffectsDisabled}):e}))}(r.trackId,t);case"TRACK_SET_READY_STATE":return function(t,e,n){return n.map((function(n){return n.id===e?Object(s.a)(Object(s.a)({},n),{},{state:t}):n}))}(r.state,r.trackId,t);default:return t}},Ge=function(t,e){var n=e.type,r=e.payload;switch(n){case"SET_EFFECT_PARAM_VALUE":return function(t,e,n,r){return r.map((function(r){return t===r.id?Object(s.a)(Object(s.a)({},r),{},{parameters:r.parameters.map((function(t){return t.id===e?Object(s.a)(Object(s.a)({},t),{},{value:n}):t}))}):r}))}(r.effectId,r.parameterId,r.value,t);default:return t}},Xe=function(t,e){switch(e.type){case"PLAYBACK_PLAY":return n=t,Object(s.a)(Object(s.a)({},n),{},{status:_t});case"PLAYBACK_PAUSE":return function(t){return Object(s.a)(Object(s.a)({},t),{},{status:bt})}(t);case"PLAYBACK_REWIND":return function(t){return Object(s.a)(Object(s.a)({},t),{},{currentPosition:0,status:_t})}(t);case"PLAYBACK_READY":return function(t){return Object(s.a)(Object(s.a)({},t),{},{status:gt})}(t);default:return t}var n},Ue=function(t,e){return{tracks:Me(t.tracks,e),effects:Ge(t.effects,e),playback:Xe(t.playback,e)}},We=ct((function(t){return nt(Boolean(t))})),He=function(t){return t.loadingState},Je=et((function(t,e){return t({type:"TRACK_SET_READY_STATE",payload:{trackId:e.id,state:e.state}})})),Ze=function(t,e){return Promise.all(function(t){var e=t.tracks;return Z(He,e)}(e)).then(Z(Je(t))).then((function(){return t({type:"PLAYBACK_READY"})}))},ze=et((function(t,e){return console.log("[DISPATCH LOG]",e),t(e)})),Qe=function(t){return{tracks:We(t.tracks.map(ye)),effects:We(t.fx.map(_e)),playback:function(t){var e=t.analyser,n=t.status,r=void 0===n?kt:n,a=t.currentPosition;return{analyser:e,status:r,currentPosition:void 0===a?0:a}}({analyser:t.analyser})}}(Te),$e=(n(19),function(){var t=Object(r.useReducer)(Ue,Qe),e=Object(c.a)(t,2),n=e[0],u=e[1],i=ze(u);return Object(r.useEffect)((function(){Ze(i,Te)}),[]),a.a.createElement(le.Provider,{value:i},a.a.createElement(qe,n))});i.a.render(a.a.createElement($e,null),document.getElementById("root"))}},[[12,1,2]]]);
//# sourceMappingURL=main.b06ed9dd.chunk.js.map