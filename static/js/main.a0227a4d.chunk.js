/*! For license information please see main.a0227a4d.chunk.js.LICENSE.txt */
(this["webpackJsonpreact-mixdesk-example"]=this["webpackJsonpreact-mixdesk-example"]||[]).push([[0],{14:function(t,e,n){t.exports=n(24)},15:function(t,e,n){},23:function(t,e,n){},24:function(t,e,n){"use strict";n.r(e);n(15);var r=n(0),a=n.n(r),u=n(10),i=n.n(u),c=n(11),s=n(12),o=n(2),l=n(1),f=n.n(l),d=n(3),p=n(9),h=n(8),m=n(4),v=n(5),y=n(13);var _=function(t,e){return t(e={exports:{}},e.exports),e.exports}((function(t){!function(){var e={}.hasOwnProperty;function n(){for(var t=[],r=0;r<arguments.length;r++){var a=arguments[r];if(a){var u=typeof a;if("string"===u||"number"===u)t.push(a);else if(Array.isArray(a)&&a.length){var i=n.apply(null,a);i&&t.push(i)}else if("object"===u)for(var c in a)e.call(a,c)&&a[c]&&t.push(c)}}return t.join(" ")}t.exports?(n.default=n,t.exports=n):window.classNames=n}()}));function b(t){return null!=t&&"object"===typeof t&&!0===t["@@functional/placeholder"]}function g(t){return function e(n){return 0===arguments.length||b(n)?e:t.apply(this,arguments)}}function k(t){return function e(n,r){switch(arguments.length){case 0:return e;case 1:return b(n)?e:g((function(e){return t(n,e)}));default:return b(n)&&b(r)?e:b(n)?g((function(e){return t(e,r)})):b(r)?g((function(e){return t(n,e)})):t(n,r)}}}var E=k((function(t,e){return Number(t)+Number(e)}));function O(t,e){switch(t){case 0:return function(){return e.apply(this,arguments)};case 1:return function(t){return e.apply(this,arguments)};case 2:return function(t,n){return e.apply(this,arguments)};case 3:return function(t,n,r){return e.apply(this,arguments)};case 4:return function(t,n,r,a){return e.apply(this,arguments)};case 5:return function(t,n,r,a,u){return e.apply(this,arguments)};case 6:return function(t,n,r,a,u,i){return e.apply(this,arguments)};case 7:return function(t,n,r,a,u,i,c){return e.apply(this,arguments)};case 8:return function(t,n,r,a,u,i,c,s){return e.apply(this,arguments)};case 9:return function(t,n,r,a,u,i,c,s,o){return e.apply(this,arguments)};case 10:return function(t,n,r,a,u,i,c,s,o,l){return e.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}var x=k((function(t,e){return 1===t?g(e):O(t,function t(e,n,r){return function(){for(var a=[],u=0,i=e,c=0;c<n.length||u<arguments.length;){var s;c<n.length&&(!b(n[c])||u>=arguments.length)?s=n[c]:(s=arguments[u],u+=1),a[c]=s,b(s)||(i-=1),c+=1}return i<=0?r.apply(this,a):O(i,t(e,a,r))}}(t,[],e))}));function j(t){return function e(n,r,a){switch(arguments.length){case 0:return e;case 1:return b(n)?e:k((function(e,r){return t(n,e,r)}));case 2:return b(n)&&b(r)?e:b(n)?k((function(e,n){return t(e,r,n)})):b(r)?k((function(e,r){return t(n,e,r)})):g((function(e){return t(n,r,e)}));default:return b(n)&&b(r)&&b(a)?e:b(n)&&b(r)?k((function(e,n){return t(e,n,a)})):b(n)&&b(a)?k((function(e,n){return t(e,r,n)})):b(r)&&b(a)?k((function(e,r){return t(n,e,r)})):b(n)?g((function(e){return t(e,r,a)})):b(r)?g((function(e){return t(n,e,a)})):b(a)?g((function(e){return t(n,r,e)})):t(n,r,a)}}}var w=Array.isArray||function(t){return null!=t&&t.length>=0&&"[object Array]"===Object.prototype.toString.call(t)};function A(t){return null!=t&&"function"===typeof t["@@transducer/step"]}function C(t,e,n){return function(){if(0===arguments.length)return n();var r=Array.prototype.slice.call(arguments,0),a=r.pop();if(!w(a)){for(var u=0;u<t.length;){if("function"===typeof a[t[u]])return a[t[u]].apply(a,r);u+=1}if(A(a)){var i=e.apply(null,r);return i(a)}}return n.apply(this,arguments)}}var N=function(){return this.xf["@@transducer/init"]()},S=function(t){return this.xf["@@transducer/result"](t)},T=k((function(t,e){return e>t?e:t}));function P(t,e){for(var n=0,r=e.length,a=Array(r);n<r;)a[n]=t(e[n]),n+=1;return a}function R(t){return"[object String]"===Object.prototype.toString.call(t)}var L=g((function(t){return!!w(t)||!!t&&("object"===typeof t&&(!R(t)&&(1===t.nodeType?!!t.length:0===t.length||t.length>0&&(t.hasOwnProperty(0)&&t.hasOwnProperty(t.length-1)))))})),I=function(){function t(t){this.f=t}return t.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},t.prototype["@@transducer/result"]=function(t){return t},t.prototype["@@transducer/step"]=function(t,e){return this.f(t,e)},t}();var B=k((function(t,e){return O(t.length,(function(){return t.apply(e,arguments)}))}));function D(t,e,n){for(var r=n.next();!r.done;){if((e=t["@@transducer/step"](e,r.value))&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}r=n.next()}return t["@@transducer/result"](e)}function F(t,e,n,r){return t["@@transducer/result"](n[r](B(t["@@transducer/step"],t),e))}var V="undefined"!==typeof Symbol?Symbol.iterator:"@@iterator";function K(t,e,n){if("function"===typeof t&&(t=function(t){return new I(t)}(t)),L(n))return function(t,e,n){for(var r=0,a=n.length;r<a;){if((e=t["@@transducer/step"](e,n[r]))&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}r+=1}return t["@@transducer/result"](e)}(t,e,n);if("function"===typeof n["fantasy-land/reduce"])return F(t,e,n,"fantasy-land/reduce");if(null!=n[V])return D(t,e,n[V]());if("function"===typeof n.next)return D(t,e,n);if("function"===typeof n.reduce)return F(t,e,n,"reduce");throw new TypeError("reduce: list must be array or iterable")}var Y=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype["@@transducer/init"]=N,t.prototype["@@transducer/result"]=S,t.prototype["@@transducer/step"]=function(t,e){return this.xf["@@transducer/step"](t,this.f(e))},t}(),q=k((function(t,e){return new Y(t,e)}));function M(t,e){return Object.prototype.hasOwnProperty.call(e,t)}var G=Object.prototype.toString,X=function(){return"[object Arguments]"===G.call(arguments)?function(t){return"[object Arguments]"===G.call(t)}:function(t){return M("callee",t)}}(),U=!{toString:null}.propertyIsEnumerable("toString"),W=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],H=function(){return arguments.propertyIsEnumerable("length")}(),J=function(t,e){for(var n=0;n<t.length;){if(t[n]===e)return!0;n+=1}return!1},Z="function"!==typeof Object.keys||H?g((function(t){if(Object(t)!==t)return[];var e,n,r=[],a=H&&X(t);for(e in t)!M(e,t)||a&&"length"===e||(r[r.length]=e);if(U)for(n=W.length-1;n>=0;)M(e=W[n],t)&&!J(r,e)&&(r[r.length]=e),n-=1;return r})):g((function(t){return Object(t)!==t?[]:Object.keys(t)})),z=k(C(["fantasy-land/map","map"],q,(function(t,e){switch(Object.prototype.toString.call(e)){case"[object Function]":return x(e.length,(function(){return t.call(this,e.apply(this,arguments))}));case"[object Object]":return K((function(n,r){return n[r]=t(e[r]),n}),{},Z(e));default:return P(t,e)}}))),Q=k((function(t,e){for(var n=e,r=0;r<t.length;){if(null==n)return;n=n[t[r]],r+=1}return n})),$=k((function(t,e){return Q([t],e)})),tt=k((function(t,e){return z($(t),e)})),et=j(K),nt=g((function(t){return x(t.length,t)})),rt=g((function(t){return!t})),at=k((function(t,e){var n=t<0?e.length+t:t;return R(e)?e.charAt(n):e[n]})),ut=at(0);var it=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype["@@transducer/init"]=N,t.prototype["@@transducer/result"]=S,t.prototype["@@transducer/step"]=function(t,e){return this.f(e)?this.xf["@@transducer/step"](t,e):t},t}(),ct=k(C(["filter"],k((function(t,e){return new it(t,e)})),(function(t,e){return n=e,"[object Object]"===Object.prototype.toString.call(n)?K((function(n,r){return t(e[r])&&(n[r]=e[r]),n}),{},Z(e)):function(t,e){for(var n=0,r=e.length,a=[];n<r;)t(e[n])&&(a[a.length]=e[n]),n+=1;return a}(t,e);var n}))),st=k((function(t,e){return ct((n=t,function(){return!n.apply(this,arguments)}),e);var n})),ot=k((function(t,e){return x(et(T,0,tt("length",e)),(function(){var n=arguments,r=this;return t.apply(r,P((function(t){return t.apply(r,n)}),e))}))})),lt=k((function(t,e){return t/e})),ft=at(-1);var dt=g((function(t){return null!=t&&(e=t.length,"[object Number]"===Object.prototype.toString.call(e))?t.length:NaN;var e})),pt=ot(lt,[et(E,0),dt]),ht="_style-module__meter__1tkPC",mt="_style-module__meterValue__1LOLp",vt=function(t){var e=t.analyser,n=void 0===e?null:e,u=t.width,i=void 0===u?210:u,c=t.height,s=void 0===c?20:c;if(!n)return null;var o=Object(r.useRef)(null);return Object(r.useEffect)((function(){var t=o.current&&o.current.getContext("2d"),e=new Uint8Array(n.frequencyBinCount);!function r(){n.getByteFrequencyData(e);var a=pt(e);t&&(t.clearRect(0,0,i,s),t.fillStyle=function(t,e){var n=e.width,r=e.height,a=t.createLinearGradient(0,0,n,r);return a.addColorStop(0,"#05860f"),a.addColorStop(.8,"#f9ef5c"),a.addColorStop(.9,"#861615"),a}(t,{width:i,height:s}),t.fillRect(0,0,i/100*a,s)),requestAnimationFrame(r)}()}),[]),a.a.createElement("div",{className:ht},a.a.createElement("canvas",{className:mt,width:i,height:s,ref:o}))},yt={icon:"_style-module__icon__1hlIZ",icon_type_play:"_style-module__icon_type_play__2tZmb",icon_type_pause:"_style-module__icon_type_pause__21fmi",icon_type_rewind:"_style-module__icon_type_rewind__oJ0Xw"},_t=function(t){var e=t.type;return a.a.createElement("div",{className:_(yt.icon,yt["icon_type_".concat(e)])})},bt="PLAYING",gt="PAUSED",kt="READY",Et="NOT_SET",Ot="running",xt="READY",jt="FAILED",wt="NOT_SET",At={LOWPASS:"lowpass",HIGHPASS:"highpass",BANDPASS:"bandpass"},Ct=function(t){return t.status===bt},Nt=function(t){return t.status===gt},St=function(t){return Ct(t)||Nt(t)||function(t){return t.status===kt}(t)},Tt=z((function(t){return t.play()})),Pt=z((function(t){return t.pause()})),Rt=z((function(t){t.stop(),t.play()})),Lt={desk:"_style-module__desk__2kf8g",controlsContainer:"_style-module__controlsContainer__3WLpI",tracks:"_style-module__tracks__2TO1x",controls:"_style-module__controls__1otLf",button:"_style-module__button__2FsJu",isButtonPressed:"_style-module__isButtonPressed__3oNW9",effects:"_style-module__effects__35pDI"},It=function(t){var e=t.playback,n=void 0===e?{}:e,r=t.onPlay,u=void 0===r?function(){}:r,i=t.onPause,c=void 0===i?function(){}:i,s=t.onRewind,o=void 0===s?function(){}:s,l=t.tracks,f=void 0===l?[]:l,d=t.effects,p=void 0===d?[]:d,h=function(t){return _(Lt.control,Lt.button,t&&Lt.isButtonPressed)},m=rt(St(n));return a.a.createElement("div",{className:Lt.desk},a.a.createElement("div",{className:Lt.tracks},f),a.a.createElement("div",{className:Lt.controlsContainer},a.a.createElement("div",{className:Lt.controls},n.analyser&&a.a.createElement(vt,{analyser:n.analyser}),a.a.createElement("button",{className:h(Ct(n)),onClick:u,disabled:m},a.a.createElement(_t,{type:"play"}),"Play"),a.a.createElement("button",{className:h(Nt(n)),onClick:c,disabled:m},a.a.createElement(_t,{type:"pause"}),"Pause"),a.a.createElement("button",{className:h(!1),onClick:o,disabled:m},a.a.createElement(_t,{type:"rewind"}),"Rewind")),a.a.createElement("div",{className:Lt.effects},p)))},Bt="_style-module__fader__3SLwD",Dt="_style-module__control__1PidS",Ft="_style-module__thumb__jFkfm",Vt="_style-module__isHorisontal__a_YRY",Kt=function(t){var e=t.position,n=void 0===e?0:e,r=t.isVertical,u=void 0!==r&&r,i=t.events,c=void 0===i?{}:i,s=u?"bottom":"left",o=n+"%";return a.a.createElement("div",Object.assign({className:Ft,style:{[s]:o}},c))},Yt={mousemove:"touchmove",mouseup:"touchend",mousedown:"touchstart"},qt="undefined"===typeof window,Mt=function(){return qt&&"ontouchstart"in window},Gt=function(t){return Mt()?Yt[t]:t},Xt=function(t){var e=t.value,n=void 0===e?0:e,u=t.isVertical,i=void 0!==u&&u,c=t.onChange,s=void 0===c?function(){}:c,o=Object(r.useRef)(null),l=function(t){t.preventDefault();var e=o.current,n=e&&e.getBoundingClientRect(),r=function(t){return t.touches?t.touches[0].pageX:t.pageX}(t)-document.documentElement.scrollLeft,a=function(t){return t.touches?t.touches[0].pageY:t.pageY}(t)-document.documentElement.scrollTop,u=i?function(t,e){var n=e.top,r=e.bottom,a=t;return a<n&&(a=n),a>r&&(a=r),(a=r-a)/(e.height/100)}(a,n):function(t,e){var n=e.width,r=e.left,a=t,u=r+n;return a>u&&(a=u),a<r&&(a=r),(a-=r)/(n/100)}(r,n);return s(u),!1},f=function t(e){return e.preventDefault(),document.documentElement.removeEventListener(Gt("mousemove"),l),document.documentElement.removeEventListener(Gt("mouseup"),t),!1},d=Mt()?"onTouchStart":"onMouseDown";return a.a.createElement("div",{className:_(Bt,!i&&Vt),ref:o},a.a.createElement("div",{className:Dt},a.a.createElement(Kt,{position:n,events:{[d]:function(t){return t.preventDefault(),document.documentElement.addEventListener(Gt("mousemove"),l),document.documentElement.addEventListener(Gt("mouseup"),f),!1}},isVertical:i})))},Ut="_style-module__radio__3DvEK",Wt="_style-module__label__2mZqh",Ht="_style-module__control__1W6Nw",Jt="_style-module__title__2UB_d",Zt="_style-module__isSelected__3k2x_",zt="_style-module__parameter__ykfH9",Qt="_style-module__controlContainer__3YzIf",$t="_style-module__title__36aDZ",te={fader:Xt,radio:function(t){t.name;var e=t.value,n=t.values,r=void 0===n?[]:n,u=t.onChange,i=void 0===u?function(){}:u;return a.a.createElement("div",{className:Ut},r&&r.map((function(t){return a.a.createElement("div",{key:t,className:Wt,onClick:function(){return i(t)}},a.a.createElement("div",{className:_(Ht,t===e&&Zt)}),a.a.createElement("div",{className:Jt},t))})))}},ee=function(t){var e=t.onChange,n=Object(y.a)(t,["onChange"]),r=n.id,u=n.name,i=n.type,c=function(t){return te[t]}(void 0===i?"fader":i);return c?a.a.createElement("div",{className:zt,key:r},a.a.createElement("span",{className:$t},u,":"),a.a.createElement("div",{className:Qt},a.a.createElement(c,Object.assign({},n,{onChange:e(r)})))):null},ne={effect:"_style-module__effect__2qSP4",title:"_style-module__title__Ls5Oz"},re=function(t){var e=t.name,n=void 0===e?"Untitled":e,r=t.parameters,u=t.onParamChange,i=void 0===u?function(){}:u;return a.a.createElement("div",{className:ne.effect},a.a.createElement("div",{className:ne.title},n),r&&r.map((function(t){return a.a.createElement("div",{className:ne.parameterValue,key:t.id},a.a.createElement(ee,Object.assign({},t,{onChange:i})))})))},ae="_style-module__track__2iklQ",ue="_style-module__button__3U0Kd",ie="_style-module__isPressed__3mOYy",ce="_style-module__sends___RuPX",se="_style-module__send__2WB_F",oe="_style-module__sendTitle__3M106",le="_style-module__title__1mGJd",fe=function(t){var e=t.id,n=t.title,r=void 0===n?"Untitled":n,u=t.volume,i=void 0===u?0:u,c=t.isMuted,s=void 0!==c&&c,o=t.isEffectsDisabled,l=void 0!==o&&o,f=t.send,d=void 0===f?{}:f,p=t.onMute,h=void 0===p?function(){}:p,m=t.onBypass,v=void 0===m?function(){}:m,y=t.onVolumeChange,b=void 0===y?function(){}:y,g=t.onSendLevelChange,k=void 0===g?function(){}:g;return a.a.createElement("div",{className:ae},a.a.createElement(Xt,{onChange:b,value:i,isVertical:!0}),a.a.createElement("div",{className:"buttons"},a.a.createElement("button",{className:_(ue,s&&ie),onClick:function(){return h(e)}},"Mute"),a.a.createElement("button",{className:_(ue,l&&ie),onClick:function(){return v(e)}},"Bypass FX")),a.a.createElement("div",{className:ce},d&&Z(d).map((function(t){return a.a.createElement("div",{className:se,key:t},a.a.createElement("span",{className:oe},t),a.a.createElement(Xt,{onChange:k(t),value:d[t]}))}))),a.a.createElement("div",{className:le},r))},de=Object(r.createContext)(null),pe=function(t){var e=t.id,n=t.title,r=t.volume,a=t.muted,u=t.bypassFX,i=t.fx;return{id:e,title:n,volume:r,state:t.state,isMuted:a,isEffectsDisabled:u,send:z((function(t){return Oe(t.gain)}),i)}},he=function(t){switch(t.id){case"delay":return{id:(e=t).id,name:"Delay",parameters:[{name:"Time",id:"time",value:e.time},{name:"Feedback",id:"feedback",value:e.feedback},{name:"Frequency",id:"frequency",value:e.frequency}]};case"distortion":return function(t){var e=t.id,n=t.filterType,r=t.frequency,a=t.strength;return{id:e,name:"Distortion",parameters:[{name:"Filter Type",id:"filterType",value:n,values:Object.values(At),type:"radio"},{name:"Frequency",id:"frequency",value:r},{name:"Strength",id:"strength",value:a}]}}(t);case"reverb":return function(t){var e=t.id,n=t.responses;return{id:e,name:"Reverb",parameters:[{name:"Response",id:"currentResponse",value:t.currentResponse,values:Object.keys(n),type:"radio"}]}}(t);default:return null}var e},me=function(){function t(e){var n=e.url,r=e.title,a=e.context,u=e.masterBus,i=e.sends,c=void 0===i?[]:i;Object(m.a)(this,t),this.id=function(t){return t.replace(/[^A-Za-z0-9]+/gi,"").toLowerCase()}(r),this.buffer=null,this.title=r,this.context=a,this.pausedAt=0,this.startedAt=0,this.muted=!1,this.playing=!1,this.bypassFX=!1,this.state=wt,this.bus=Ce(a),we(this.bus,u),this.fx={},c.length>0&&this.addFx(c),this.loadingState=this.load(n)}return Object(v.a)(t,[{key:"load",value:function(t){var e=this;return ge(t).then((function(t){return new Promise((function(n,r){return e.context.decodeAudioData(t,n,r)}))})).then((function(t){return e.buffer=t,e.state=xt,e})).catch((function(t){return e.state=jt,console.log("[ERROR LOADING TRACK]",t),e}))}},{key:"play",value:function(){this.playing||(this.source=this.context.createBufferSource(),this.source.buffer=this.buffer,this.source.connect(this.bus),this.source.start(0,this.pausedAt),this.startedAt=this.context.currentTime-this.pausedAt,this.pausedAt=0,this.playing=!0)}},{key:"pause",value:function(){if(this.playing){var t=this.context.currentTime-this.startedAt;this.stop(),this.pausedAt=t}}},{key:"stop",value:function(){this.source&&(this.source.disconnect(),this.source.stop(0),this.source=null),this.pausedAt=0,this.startedAt=0,this.playing=!1}},{key:"mute",value:function(){this.previousVolume=this.volume,this.volume=0,this.muted=!0}},{key:"unmute",value:function(){this.muted=!1,this.volume=this.previousVolume}},{key:"toggleMute",value:function(){this.muted?this.unmute():this.mute()}},{key:"addFx",value:function(t){var e=this;return t.map((function(t){var n=t.id,r=t.signalIn,a=Ce(e.context,0);return!e.fx[n]&&(we(e.bus,a),we(a,r),e.fx[n]=a,a)}))}},{key:"removeFx",value:function(t){this.fx[t].disconnect()}},{key:"toggleFX",value:function(){var t=this,e=Object.keys(this.fx);return this.bypassFX?e.map((function(e){return t.fx[e].gain.value=t.fx[e].previousVolume})):e.map((function(e){t.fx[e].previousVolume=t.fx[e].gain.value,t.fx[e].gain.value=0})),this.bypassFX=!this.bypassFX,this.bypassFX}},{key:"volume",get:function(){return Oe(this.bus.gain)},set:function(t){this.muted?this.previousVolume=t:xe(this.bus.gain,t)}}]),t}(),ve=function(){return new(window.AudioContext||window.webkitAudioContext)},ye=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=t.createGain();return n.connect(t.destination),e.map((function(t){return n.connect(t)})),n},_e=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{fftSize:2048},n=t.createAnalyser();return Z(e).map((function(t){return n[t]=e[t]})),n},be=nt((function(t,e){var n=t.context,r=t.masterBus,a=t.sends,u=void 0===a?[]:a,i=e.url,c=e.title;return new me({url:i,title:c,context:n,masterBus:r,sends:u})})),ge=function(t){return fetch(t).then((function(t){return t.arrayBuffer()}))},ke=function(t){return t.state===Ot},Ee=function(t){return t.resume()},Oe=function(t){var e=t.value,n=t.maxValue;return 1===t.defaultValue?e/.01:e/(n/100)},xe=function(t,e){var n=t.maxValue,r=t.minValue,a=e*((1===t.defaultValue?1:n)/100);return a<r?(t.value=r,t):a>n?(t.value=n,t):(t.value=a,t)},je=function(t,e){return Z(e).forEach((function(n){return!function(t,e){return t[e]instanceof AudioParam}(t,n)?t[n]=e[n]:xe(t[n],e[n]),t}))},we=function(t,e){return t.connect(e)},Ae=function(t,e){t.disconnect(),we(t,e)},Ce=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=t.createGain();return n.gain.value=e,n},Ne=function(){function t(e){var n=e.id,r=e.context,a=e.masterBus;Object(m.a)(this,t),this.id=n,this.isLooped=!1,this.chain=[],this.context=r,this.signalIn=Ce(r),this.signalOut=Ce(r),we(this.signalOut,a)}return Object(v.a)(t,[{key:"addNode",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};je(t,e),this.isChainEmpty?we(this.signalIn,t):Ae(ft(this.chain),t),we(t,this.signalOut),this.chain.push(t)}},{key:"tweakNode",value:function(t,e,n){var r=this.chain[t];return!!r&&je(r,{[e]:n})}},{key:"isChainEmpty",get:function(){return 0===this.chain.length}},{key:"gain",get:function(){return this.signalIn.gain.value},set:function(t){this.signalIn.gain.value=t}},{key:"loop",set:function(t){var e=ft(this.chain),n=ut(this.chain);we(e,n),this.isLooped=t},get:function(){return this.isLooped}}]),t}(),Se=function(t){Object(p.a)(n,t);var e=Object(h.a)(n);function n(t,r){var a;return Object(m.a)(this,n),(a=e.call(this,{context:t,masterBus:r,id:"delay"})).addNode(t.createDelay(),{delayTime:25}),a.addNode(t.createGain(),{gain:80}),a.addNode(t.createBiquadFilter(),{frequency:5}),a.loop=!0,a}return Object(v.a)(n,[{key:"time",set:function(t){this.tweakNode(0,"delayTime",t)},get:function(){return Oe(this.chain[0].delayTime)}},{key:"feedback",set:function(t){this.tweakNode(1,"gain",t)},get:function(){return Oe(this.chain[1].gain)}},{key:"frequency",set:function(t){this.tweakNode(2,"frequency",t)},get:function(){return Oe(this.chain[2].frequency)}}]),n}(Ne),Te=function(t){Object(p.a)(n,t);var e=Object(h.a)(n);function n(t,r){var a;return Object(m.a)(this,n),(a=e.call(this,{context:t,masterBus:r,id:"distortion"}))._strength=200,a.addNode(t.createBiquadFilter(),{type:"highpass",frequency:138,Q:1}),a.addNode(t.createWaveShaper(),{curve:a.getCurve(a._strength),oversample:"4x"}),a}return Object(v.a)(n,[{key:"getCurve",value:function(t){for(var e,n="number"===typeof t?t:50,r=new Float32Array(44100),a=Math.PI/180,u=0;u<44100;++u)e=2*u/44100-1,r[u]=(3+n)*e*20*a/(Math.PI+n*Math.abs(e));return r}},{key:"strength",get:function(){return Oe({maxValue:1e3,minValue:0,value:this._strength})},set:function(t){this._strength=t,this.tweakNode(1,"curve",this.getCurve(t))}},{key:"filterType",set:function(t){this.tweakNode(0,"type",t)},get:function(){return this.chain[0].type}},{key:"frequency",set:function(t){this.tweakNode(0,"frequency",t)},get:function(){return Oe(this.chain[0].frequency)}}]),n}(Ne),Pe={Versatile:"assets/audio/impulse-response/impulse-1.mp3",Pattan:"assets/audio/impulse-response/impulse-2.mp3",Style:"assets/audio/impulse-response/impulse-3.mp3"},Re=function(t){Object(p.a)(n,t);var e=Object(h.a)(n);function n(t,r){var a,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{responses:Pe};return Object(m.a)(this,n),(a=e.call(this,{context:t,masterBus:r,id:"reverb"})).responses=u.responses,a.currentResponseId=ut(Z(u.responses)),a.addNode(t.createConvolver()),a.loadResponse(),a}return Object(v.a)(n,[{key:"loadResponse",value:function(){var t=Object(d.a)(f.a.mark((function t(){var e,n,r,a=this;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.responses[this.currentResponseId],t.next=3,ge(e).catch((function(t){return console.log("[ERROR LOADING RESPONSE]",t)}));case 3:if(!((n=t.sent).byteLength>0)){t.next=13;break}return r=new Promise((function(t,e){return a.context.decodeAudioData(n,t,e)})),t.t0=this,t.next=9,r;case 9:t.t1=t.sent,t.t0.tweakNode.call(t.t0,0,"buffer",t.t1),t.next=14;break;case 13:console.log("[ERROR LOADING RESPONSE] arrayBuffer is empty");case 14:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"currentResponse",get:function(){return this.currentResponseId},set:function(t){this.responses[t]&&(this.currentResponseId=t,this.loadResponse())}}]),n}(Ne),Le=new(function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];Object(m.a)(this,t),this.context=ve(),this.analyser=_e(this.context),this.masterBus=ye(this.context,[this.analyser]),this.fx=r.map((function(t){return new t(e.context,e.masterBus)})),this.load(n)}return Object(v.a)(t,[{key:"play",value:function(){var t=Object(d.a)(f.a.mark((function t(){var e;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.context,!1!==ke(e)){t.next=4;break}return t.next=4,Ee(e);case 4:return Tt(this.tracks),t.abrupt("return",this);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"pause",value:function(){var t=Object(d.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Pt(this.tracks),t.abrupt("return",this);case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"rewind",value:function(){var t=Object(d.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Rt(this.tracks),t.abrupt("return",this);case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"setTrackVolume",value:function(){var t=Object(d.a)(f.a.mark((function t(e,n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.tracks.map((function(t){return t.id===e&&(t.volume=n),t})));case 1:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"setTrackSendLevel",value:function(){var t=Object(d.a)(f.a.mark((function t(e,n,r){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.tracks.map((function(t){return t.id===e&&xe(t.fx[n].gain,r),t})));case 1:case"end":return t.stop()}}),t,this)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"toggleTrack",value:function(){var t=Object(d.a)(f.a.mark((function t(e){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.tracks.map((function(t){return t.id===e&&t.toggleMute(),t})));case 1:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"toggleTrackFx",value:function(){var t=Object(d.a)(f.a.mark((function t(e){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.tracks.map((function(t){return t.id===e&&t.toggleFX(),t})));case 1:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"setSendParamValue",value:function(){var t=Object(d.a)(f.a.mark((function t(e,n,r){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.fx.map((function(t){return t.id===e&&je(t,{[n]:r}),t})));case 1:case"end":return t.stop()}}),t,this)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"load",value:function(t){return this.tracks=t.map(be({context:this.context,masterBus:this.masterBus,sends:this.fx})),Promise.all(this.tracks.map((function(t){return t.loadingState})))}}]),t}())([],[Se,Re,Te]),Ie=function(){var t=Object(d.a)(f.a.mark((function t(e){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Le.play();case 2:return t.abrupt("return",e({type:"PLAYBACK_PLAY"}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Be=function(){var t=Object(d.a)(f.a.mark((function t(e){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Le.pause();case 2:return t.abrupt("return",e({type:"PLAYBACK_PAUSE"}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),De=function(){var t=Object(d.a)(f.a.mark((function t(e){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Le.rewind();case 2:return t.abrupt("return",e({type:"PLAYBACK_REWIND"}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Fe=nt(function(){var t=Object(d.a)(f.a.mark((function t(e,n,r,a){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Le.setSendParamValue(n,r,a);case 2:return t.abrupt("return",e({type:"SET_EFFECT_PARAM_VALUE",payload:{effectId:n,parameterId:r,value:a}}));case 3:case"end":return t.stop()}}),t)})));return function(e,n,r,a){return t.apply(this,arguments)}}()),Ve=nt(function(){var t=Object(d.a)(f.a.mark((function t(e,n,r){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Le.setTrackVolume(n,r);case 2:return t.abrupt("return",e({type:"SET_TRACK_VOLUME",payload:{trackId:n,value:r}}));case 3:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()),Ke=nt(function(){var t=Object(d.a)(f.a.mark((function t(e,n,r,a){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Le.setTrackSendLevel(n,r,a);case 2:return t.abrupt("return",e({type:"SET_TRACK_SEND_LEVEL",payload:{fxId:r,trackId:n,value:a}}));case 3:case"end":return t.stop()}}),t)})));return function(e,n,r,a){return t.apply(this,arguments)}}()),Ye=nt(function(){var t=Object(d.a)(f.a.mark((function t(e,n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Le.toggleTrack(n);case 2:return t.abrupt("return",e({type:"TRACK_MUTE_TOGGLE",payload:{trackId:n}}));case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),qe=nt(function(){var t=Object(d.a)(f.a.mark((function t(e,n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Le.toggleTrackFx(n);case 2:return t.abrupt("return",e({type:"TRACK_FX_TOGGLE",payload:{trackId:n}}));case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),Me=function(t){var e=Object(r.useContext)(de);return a.a.createElement(re,Object.assign({},t,{onParamChange:Fe(e,t.id)}))},Ge=function(t){var e=t.id,n=Object(r.useContext)(de);return a.a.createElement(fe,Object.assign({},t,{onMute:Ye(n),onBypass:qe(n),onVolumeChange:Ve(n,e),onSendLevelChange:Ke(n,e)}))},Xe=function(t){var e=t.tracks,n=t.effects,u=t.playback,i=Object(r.useContext)(de),c=e.map((function(t){return a.a.createElement(Ge,Object.assign({},t,{key:t.id}))})),s=n.map((function(t){return a.a.createElement(Me,Object.assign({},t,{key:t.id}))}));return a.a.createElement(It,{onPlay:function(){return Ie(i)},onPause:function(){return Be(i)},onRewind:function(){return De(i)},tracks:c,effects:s,playback:u})},Ue=function(t,e){var n=e.type,r=e.payload;switch(n){case"SET_TRACK_VOLUME":return function(t,e,n){return n.map((function(n){return n.id===e?Object(o.a)(Object(o.a)({},n),{},{volume:t}):n}))}(r.value,r.trackId,t);case"SET_TRACK_SEND_LEVEL":return function(t,e,n,r){return r.map((function(r){return r.id===n?Object(o.a)(Object(o.a)({},r),{},{send:Object(o.a)(Object(o.a)({},r.send),{},{[e]:t})}):r}))}(r.value,r.fxId,r.trackId,t);case"TRACK_MUTE_TOGGLE":return function(t,e){return e.map((function(e){return e.id===t?Object(o.a)(Object(o.a)({},e),{},{isMuted:!e.isMuted}):e}))}(r.trackId,t);case"TRACK_FX_TOGGLE":return function(t,e){return e.map((function(e){return e.id===t?Object(o.a)(Object(o.a)({},e),{},{isEffectsDisabled:!e.isEffectsDisabled}):e}))}(r.trackId,t);case"TRACK_SET_READY_STATE":return function(t,e,n){return n.map((function(n){return n.id===e?Object(o.a)(Object(o.a)({},n),{},{state:t}):n}))}(r.state,r.trackId,t);case"SET_TRACKS":return Object(s.a)(r);default:return t}},We=function(t,e){var n=e.type,r=e.payload;switch(n){case"SET_EFFECT_PARAM_VALUE":return function(t,e,n,r){return r.map((function(r){return t===r.id?Object(o.a)(Object(o.a)({},r),{},{parameters:r.parameters.map((function(t){return t.id===e?Object(o.a)(Object(o.a)({},t),{},{value:n}):t}))}):r}))}(r.effectId,r.parameterId,r.value,t);default:return t}},He=function(t,e){switch(e.type){case"PLAYBACK_PLAY":return n=t,Object(o.a)(Object(o.a)({},n),{},{status:bt});case"PLAYBACK_PAUSE":return function(t){return Object(o.a)(Object(o.a)({},t),{},{status:gt})}(t);case"PLAYBACK_REWIND":return function(t){return Object(o.a)(Object(o.a)({},t),{},{currentPosition:0,status:bt})}(t);case"PLAYBACK_READY":return function(t){return Object(o.a)(Object(o.a)({},t),{},{status:kt})}(t);default:return t}var n},Je=function(t,e){return{tracks:Ue(t.tracks,e),effects:We(t.effects,e),playback:He(t.playback,e)}},Ze=st((function(t){return rt(Boolean(t))})),ze=function(t){return t.loadingState},Qe=nt((function(t,e){return t({type:"TRACK_SET_READY_STATE",payload:{trackId:e.id,state:e.state}})})),$e=function(t,e){return Promise.all(function(t){var e=t.tracks;return z(ze,e)}(e)).then(z(Qe(t))).then((function(){return t({type:"PLAYBACK_READY"})}))},tn=nt((function(t,e){return console.log("[DISPATCH LOG]",e),t(e)})),en=function(t){return{tracks:Ze(t.tracks.map(pe)),effects:Ze(t.fx.map(he)),playback:function(t){var e=t.analyser,n=t.status,r=void 0===n?Et:n,a=t.currentPosition;return{analyser:e,status:r,currentPosition:void 0===a?0:a}}({analyser:t.analyser})}},nn=(en(Le),n(23),[{title:"Drums",url:"mixer/assets/audio/drums.mp3"},{title:"Bass",url:"mixer/assets/audio/bass.mp3"},{title:"Keys",url:"mixer/assets/audio/riddim.mp3"},{title:"Melodies",url:"mixer/assets/audio/vox.mp3"}]),rn=function(t){var e=t.tracks,n=void 0===e?nn:e,u=t.eventListener,i=void 0===u?function(){}:u,s=Object(r.useReducer)(Je,en(Le)),o=Object(c.a)(s,2),l=o[0],f=o[1],d=tn(f);return Object(r.useEffect)((function(){Le.load(n).then((function(t){var e=en(Le).tracks;$e((function(){d.apply(void 0,arguments),d({type:"SET_TRACKS",payload:e}),i.apply(void 0,arguments)}),Le)}))}),[n]),a.a.createElement(de.Provider,{value:d},a.a.createElement(Xe,l))};i.a.render(a.a.createElement(rn,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.a0227a4d.chunk.js.map